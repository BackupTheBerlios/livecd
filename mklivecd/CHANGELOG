# $Id: CHANGELOG,v 1.41 2003/10/05 07:04:38 jaco Exp $

* Sat, Oct 04, 2003, 0.5.6-cvs
  + Buchan Milne <bgmilne@cae.co.za>:
    [mklivecd]:
      - Fix rootdir to use the kernel/modules from the chroot
      - Add basic bootsplash support if bootsplash is installed
        on the image'd system (normal as well as chroot)
      - Avoid premature shell expansion polluting the exclude list
      - Optimised command-line parsing to not use redundant echo's
      - Added bootsplash theme support with '--theme' option
    [mklivecd.spec]:
      - Updated to allow for rpmbuild -ta <tarball> to work for
        a CVS snapshot generated via 'make dist'
  + Jaco Greeff <jaco@linuxminicd.org>:
    [FAQ]:
      - Updated to include some compression parameter
        statistics (describes mklivecd '--blocksize' and
        '--looptype' options)
      - Added an entry for the "keyb=<mapping>' isolinux boot
        option
      - Added an entry for the full list of available keyboard
        mappings and their descriptions
      - Added an QA for the creation of LSS images as used by
        the 'mklivecd --iso-bgimage' command
      - Added an QA for the Mandrake isolinux graphics extension
    [Makefile]:
      - Combined piped sed commands into one
      - Removed non-existing busybox and cloop version
        replacements for specfile generation (legacy)
      - Distribute generated specfile by default in 'dist',
        instead of the previously included '.in' (This allows
        a build via the "rpmbuild -t[abs] mklivecd-<ver>.tar.bz2"
        command)
      - Ability to build CVS dist per date
      - Add RPM release information for spec file generation
      - Added 'make rpm' target for building both the noarch and
        src RPMS
      - Build all targets to DISTDIR
      - Split variables into Rules.mk
    [Rules.mk]:
      - Added file containing all variables from original Makefile
      - Added default keyboard mapping variable
      - Added default resolution and vgamode mapping variables
    [README]:
      - Include CVS location
    [hwdetect]:
      - Added support for USB devices, probing USB controllers to
        enable detection of attached devices
      - Try to auto-detect monitors via DDC, if not available or
        cannot be detected properly, fall back to a good default
        (1024x768). Thanks to Pixel <pixel@mandrakesoft.com> for
        pointers in this area.
      - Default keyboard to 'us'. (Specified in Rules.mk)
      - Keyboad can be specified on isolinux prompt, for example
        keyb=dvorak resulting in a dvorak keyboard (If not
        specified, it defaults to Rules.mk, 'us', value)
      - hwdetect is not called from rc.* anymore (rather from
        linuxrc, to setup before MDK init)
      - Added partition reading and fstab generation
      - Generate proper modules.conf from probed devices
      - Added PCMCIA support and prepared for firewire and other
        types of busses
    [linuxrc]:
      - Only make symlinks to /var/lib/{rpm,urpmi} directories, the
        rest are actual writables
      - Complete rework of creation of /var directories
      - Allow rw access to /lib/dev-state
      - Call hwdetect at end of sequence, before init
      - Allow for a non-hwdetect override with hwdetect=no
      - Make current running kernel's modules.dep writable
    [mklivecd]:
      - Changed default blocksize back to 64K (sane default for
        fastest operation in decompressing the compressed image)
      - Added '--blocksize' option, accepting sizes in K, eg.
        '--blocksize 224' to use a 224K size for the compressed
        blocks.
      - Added '--lowmem' option, writing created iso to disk
        before compression. (Huge saving on memory comsumption
        for low memory systems, expensive on disk space)
      - Case statement now has one combined entry for '-h', '-?'
        and '--help' command-line options
      - Added '--final' option, stripping unneeded lines from the
        scripts on the initrd image, saving some space
      - Added '--keyboard=<language>' option to override the
        default keyboard layout
      - Added '--iso-bootmsg=<boot.msg>' option to provide a
        message for the isolinux message display
      - Added '--iso-bgimage=<image.lss>' option to provide the
        lss image to be displayed as a background on the isolinux
        prompt
      - Added '--iso-graphic' option to cater for the Mandrake
        isolinux graphic extension
      - Removed the isolinux.cfg file, it is generated dynamically
        now to cater for trhe mklivecd options
      - Added '--iso-bootkey=<key>,<msg>' option
      - Be less verbose by default, '--verbose' option works now
      - Added '--resolution' option for fb resolution setup
      - Added '--splash={yes|no}' option to try and create a
        bootsplash initrd (default: yes)
      - Removed 'nomodules' parameter from isolinux.cfg
    [mklivecd.spec]:
      - Synced with contrib spec
      - Ability to auto-generate version info for changelog
      - Build CVS specs as per MDK guidelines
      - Automatically add build date to spec changelog
      - Display archive version in last changelog
      - Credit to Buchan for his spec fixes


* Thu, Sep 25, 2003, 0.5.5
  + Jaco Greeff <jaco@linuxminicd.org>:
    [README]:
      - Add mailing list information
    [hwdetect]:
      - Moved hwdetect initscript out of /etc/init.d into
        /usr/share/mklivecd/init.d
      - Allow hwdetect to be executed from either /usr/sbin (if
        installed) or from the always available /initrd/usr/sbin
        in initscript
    [linuxrc]:
      - Only cater for devfs, manually created device should be
        done in mklivecd, not "on-the-fly"
      - Chmod /tmp to 777, allowing all users write access to it
      - Added support for bzloop images (experimental) (Also see
        the mklivecd changelog entry on this)
    [mklivecd]:
      - Added support for bzloop images (experimental), specified
        with --looptype=<cloop|bzloop> option. This
        (--looptype=bzloop) requires an updated cloop-utils
        providing both the bzloop module and {create,extract}_bzfs
        executables (http://www.linuxminicd.org/bzloop/)
      - Changed input blocksize to compression from 64K to 224K.
        This still allows for overflow blocks (block with no
        compression) to be smaller than the maximum size of 256K,
        whilst allowing for a smaller final iso size (It can be
        made larger, but 224K is safe and should work for all
        types of blocks)
      - Test for both the mkisofs and create_{compressed_,bz}fs
        executables before using them
      - Test that the user indeed has root privledges before
        trying to build the iso image
      - Display the "short GPL" in '--version' option
      - If an unknown option is specified (-*), complain
      - If a target iso is not specified, display the usage info
      - Redirect all error messages to stderr
      - Changed "mkisofs -r ..." to "mkisofs -R ..." to preserve
        directory ownership


* Tue, Sep 23, 2003, 0.5.4
  + Jaco Greeff <jaco@linuxminicd.org>:
    [FAQ]:
      - Added an entry for creating a very minimal Mandrake LiveCD
    [mklivecd]:
      - Removed locale dependency from initrd size calculation
        (Reported by Tibor Pittich, fix suggested by Buchan Milne)
      - Renamed "--root" option to "--rootdir"
      - --rootdir option now works as expected (inclusive of
        --exclude-{file,dir} options)
      - If the selected kernel doesn't match the running kernel,
        don't try to generate the module dependencies, rather just
        copy the existing files to the correct initrd location
    [mklivecd.spec]:
      - Added mkisofs to RPM spec (Reported by Tibor Pittich)
      - Sync with RPM spec as imported into Mandrake contrib


* Mon, Sep 22, 2003, 0.5.3
  + Jaco Greeff <jaco@linuxminicd.org>:
    [Makefile]:
      - Split project version into major, minor & patch
      - Fixed uname -r bug, allowing for correct execution via
        shell
    [linuxrc]:
      - Now creates /var/log/wtmp and /var/run/utmp
    [hwdetect]:
      - Once again creates a workable (non-optimal) XF86Config
        file allowing X to be started
      - Added explicit --kernel option, if not specified it
        defaults to the current running kernel (uname -r)
      - Added --exclude-file option
      - Exclude the following file patterns by default in the
        LiveCD image creation:
        - core.* (/core[.][0-9][0-9]*$)
        - *.rpmnew (.*[.]rpmnew$)
        - *.rpmsave (.*[.]rpmsave$)
        - /.* (^/[.].*)
        - .bash_history (/[.]bash_history$)
        - .fonts.cache-* (/[.]fonts[.]cache-[0-9]$)
        - .xauth* (/[.]xauth.*)
        - .xsession-errors (/[.]xsession-errors$)
      - Changed exclude directory pattern to not assume a full
        path, i.e. ^ is to be added to denote a full path
      - Do exact matches on the default excluded directories
        (leading ^ and trailing $) to shrink the size of the
        excluded list, making mkisofs scanning faster
      - Decreased initrd size by removing the extraoneous 250K
        (not needed anymore)
      - Cleaned usage information displayed in --help
      - If --cloop is not specified on command-line, don't create
        hard link
      - Try /tmp first before $TMPDIR for a decent tmp directory
        (/tmp is always excluded from the final LiveCD, $TMPDIR
        might not be)


* Mon, Sep 15, 2003, 0.5.2
  + Jaco Greeff <jaco@linuxminicd.org>:
    [linuxrc]:
      - Cater for pivot_root, allowing for better access to actual
        mounted filesystems


* Mon, Sep 01, 2003, 0.5.1
  + Jaco Greeff <jaco@linuxminicd.org>:
    [mklivecd]:
      - Initial release under the mklivecd name (preparing for a
        wider release to the MDK community) after being adapted
        from the MiniCD build, init and hwdetect scripts
    [mklivecd.spec]:
      - Added spec file for RPM build
