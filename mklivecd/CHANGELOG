# $Id: CHANGELOG,v 1.68 2003/11/05 12:51:18 jaco Exp $

* Wed, Nov 05, 2003, 0.5.7-cvs
  + Buchan Milne <bgmilne@cae.co.za>:
    [linuxrc]:
      - Fix error on illegal attempt to unmount /initrd/cdrom upon
        system shutdown
      - Added hostname= boot option to set the hostname
    [mklivecd]:
      - Add support ('--extraisofiles' option) for adding
        additional files to the root of the LiveCD ISO image
        (ie to see when browsing the CD normally)
  + Jaco Greeff <jaco@linuxminicd.org>:
    [FAQ]:
      - Point to the gif2lss program in the boot splash section
    [README]:
      - Updated to point to the new LiveCD home of mklivecd,
        http://developer.berlios.de/projects/livecd/ with the
        correct mailing list info
    [Rules.mk]:
      - Created list for default normal and SCSI modules
      - Created listing for optional modules
      - Split modules into Modules.mk
    [hwdetect]:
      - PS/2 mice should now work in wheel and non-wheel modes.
        Thanks to Texstar <texstar@houston.rr.com> for ideas and
        investigation. Threads around this are available from:
        http://lists.berlios.de/pipermail/minicd-scripts/2003-October/000229.html
      - Allow xres=1024x768|1280x1024|1400x1050|1600x1400 to
        specify the resolution in the case where the monitor
        cannot be reliably detected, eg. laptop panels
      - Add support for Nvidia GLX drivers
      - Add support for ATI GLX drivers
      - Detect USB Flash devices and mount them rw
      - s/LIVECD.MNT/.livecd.mnt/
      - Updated URL: http://livecd.berlios.de
    [linuxrc]:
      - Allow for finding the cloop image on SCSI devices as well
        by probing with all the SCSI modules
      - Added support for zlib_inflate if exists as a module
      - Added support for translucency kernel module
      - Utilise the fstab option as passed on the iso commandline
        to automatically mount partitions rw if specified
      - Updated URL: http://livecd.berlios.de
    [mklivecd]:
      - Be verbose in depmod command
      - Copy SCSI and optinal modules in addition to normal
        (required) ones to initrd
      - Reworked command-line parameters to be more consistent
      - Added '--experimental' option for testing non-mainstream
        options and additions
      - Added '--fstab' option for overriding the default fstab
        creation behaviour
      - Added the ability to include extra boot options to be
        passed to the kernel with '--bootopt' options
      - Add --volumeid, --application, --preparer, --publisher
        options to identify iso uniquely
      - Add --usbhome option to always use connected USB flash
        devices as a persistent home
      - Updated URL: http://livecd.berlios.de


* Mon, Oct 06, 2003, 0.5.6
  + Buchan Milne <bgmilne@cae.co.za>:
    [mklivecd]:
      - Fix rootdir to use the kernel/modules from the chroot
      - Add basic bootsplash support if bootsplash is installed
        on the image'd system (normal as well as chroot)
      - Avoid premature shell expansion polluting the exclude list
      - Optimised command-line parsing to not use redundant echo's
      - Added bootsplash theme support with '--theme' option
    [mklivecd.spec]:
      - Updated to allow for rpmbuild -ta <tarball> to work for
        a CVS snapshot generated via 'make dist'
  + Jaco Greeff <jaco@linuxminicd.org>:
    [FAQ]:
      - Updated to include some compression parameter
        statistics (describes mklivecd '--blocksize' and
        '--looptype' options)
      - Added an entry for the "keyb=<mapping>' isolinux boot
        option
      - Added an entry for the full list of available keyboard
        mappings and their descriptions
      - Added an QA for the creation of LSS images as used by
        the 'mklivecd --iso-bgimage' command
      - Added an QA for the Mandrake isolinux graphics extension
      - Added entry for random hangs (attributed to cloop < 1.02)
    [Makefile]:
      - Combined piped sed commands into one
      - Removed non-existing busybox and cloop version
        replacements for specfile generation (legacy)
      - Distribute generated specfile by default in 'dist',
        instead of the previously included '.in' (This allows
        a build via the "rpmbuild -t[abs] mklivecd-<ver>.tar.bz2"
        command)
      - Ability to build CVS dist per date
      - Add RPM release information for spec file generation
      - Added 'make rpm' target for building both the noarch and
        src RPMS
      - Build all targets to DISTDIR
      - Split variables into Rules.mk
    [Rules.mk]:
      - Added file containing all variables from original Makefile
      - Added default keyboard mapping variable
      - Added default resolution and vgamode mapping variables
    [README]:
      - Include CVS location
    [hwdetect]:
      - Added support for USB devices, probing USB controllers to
        enable detection of attached devices
      - Try to auto-detect monitors via DDC, if not available or
        cannot be detected properly, fall back to a good default
        (1024x768). Thanks to Pixel <pixel@mandrakesoft.com> for
        pointers in this area.
      - Default keyboard to 'us'. (Specified in Rules.mk)
      - Keyboad can be specified on isolinux prompt, for example
        keyb=dvorak resulting in a dvorak keyboard (If not
        specified, it defaults to Rules.mk, 'us', value)
      - hwdetect is not called from rc.* anymore (rather from
        linuxrc, to setup before MDK init)
      - Added partition reading and fstab generation
      - Generate proper modules.conf from probed devices
      - Added PCMCIA support and prepared for firewire and other
        types of busses
      - Added rudamentary persistent partition support. Persisted
        partition should have a "LIVECD.MNT" file in the root,
        with entry "mount=<mountpoint>". Only tested for
        "mount=/home" at present
      - Initial support for SCSI host adapters
      - Initial support for wireless network cards
    [linuxrc]:
      - Only make symlinks to /var/lib/{rpm,urpmi} directories, the
        rest are actual writables
      - Complete rework of creation of /var directories
      - Allow rw access to /lib/dev-state
      - Call hwdetect at end of sequence, before init
      - Allow for a non-hwdetect override with hwdetect=no
      - Make current running kernel's modules.dep writable
    [mklivecd]:
      - Changed default blocksize back to 64K (sane default for
        fastest operation in decompressing the compressed image)
      - Added '--blocksize' option, accepting sizes in K, eg.
        '--blocksize 224' to use a 224K size for the compressed
        blocks.
      - Added '--lowmem' option, writing created iso to disk
        before compression. (Huge saving on memory comsumption
        for low memory systems, expensive on disk space)
      - Case statement now has one combined entry for '-h', '-?'
        and '--help' command-line options
      - Added '--final' option, stripping unneeded lines from the
        scripts on the initrd image, saving some space. This
        option also leaves out the 'debug' option from the CD
      - Added '--keyboard=<language>' option to override the
        default keyboard layout
      - Added '--iso-bootmsg=<boot.msg>' option to provide a
        message for the isolinux message display
      - Added '--iso-bgimage=<image.lss>' option to provide the
        lss image to be displayed as a background on the isolinux
        prompt
      - Added '--iso-graphic' option to cater for the Mandrake
        isolinux graphic extension
      - Removed the isolinux.cfg file, it is generated dynamically
        now to cater for trhe mklivecd options
      - Added '--iso-bootkey=<key>,<msg>' option
      - Be less verbose by default, '--verbose' option works now
      - Added '--resolution' option for fb resolution setup
      - Added '--splash={yes|no}' option to try and create a
        bootsplash initrd (default: yes)
      - Removed 'nomodules' parameter from isolinux.cfg
    [mklivecd.spec]:
      - Synced with contrib spec
      - Ability to auto-generate version info for changelog
      - Build CVS specs as per MDK guidelines
      - Automatically add build date to spec changelog
      - Display archive version in last changelog
      - Credit to Buchan for his spec fixes


* Thu, Sep 25, 2003, 0.5.5
  + Jaco Greeff <jaco@linuxminicd.org>:
    [README]:
      - Add mailing list information
    [hwdetect]:
      - Moved hwdetect initscript out of /etc/init.d into
        /usr/share/mklivecd/init.d
      - Allow hwdetect to be executed from either /usr/sbin (if
        installed) or from the always available /initrd/usr/sbin
        in initscript
    [linuxrc]:
      - Only cater for devfs, manually created device should be
        done in mklivecd, not "on-the-fly"
      - Chmod /tmp to 777, allowing all users write access to it
      - Added support for bzloop images (experimental) (Also see
        the mklivecd changelog entry on this)
    [mklivecd]:
      - Added support for bzloop images (experimental), specified
        with --looptype=<cloop|bzloop> option. This
        (--looptype=bzloop) requires an updated cloop-utils
        providing both the bzloop module and {create,extract}_bzfs
        executables (http://www.linuxminicd.org/bzloop/)
      - Changed input blocksize to compression from 64K to 224K.
        This still allows for overflow blocks (block with no
        compression) to be smaller than the maximum size of 256K,
        whilst allowing for a smaller final iso size (It can be
        made larger, but 224K is safe and should work for all
        types of blocks)
      - Test for both the mkisofs and create_{compressed_,bz}fs
        executables before using them
      - Test that the user indeed has root privledges before
        trying to build the iso image
      - Display the "short GPL" in '--version' option
      - If an unknown option is specified (-*), complain
      - If a target iso is not specified, display the usage info
      - Redirect all error messages to stderr
      - Changed "mkisofs -r ..." to "mkisofs -R ..." to preserve
        directory ownership


* Tue, Sep 23, 2003, 0.5.4
  + Jaco Greeff <jaco@linuxminicd.org>:
    [FAQ]:
      - Added an entry for creating a very minimal Mandrake LiveCD
    [mklivecd]:
      - Removed locale dependency from initrd size calculation
        (Reported by Tibor Pittich, fix suggested by Buchan Milne)
      - Renamed "--root" option to "--rootdir"
      - --rootdir option now works as expected (inclusive of
        --exclude-{file,dir} options)
      - If the selected kernel doesn't match the running kernel,
        don't try to generate the module dependencies, rather just
        copy the existing files to the correct initrd location
    [mklivecd.spec]:
      - Added mkisofs to RPM spec (Reported by Tibor Pittich)
      - Sync with RPM spec as imported into Mandrake contrib


* Mon, Sep 22, 2003, 0.5.3
  + Jaco Greeff <jaco@linuxminicd.org>:
    [Makefile]:
      - Split project version into major, minor & patch
      - Fixed uname -r bug, allowing for correct execution via
        shell
    [linuxrc]:
      - Now creates /var/log/wtmp and /var/run/utmp
    [hwdetect]:
      - Once again creates a workable (non-optimal) XF86Config
        file allowing X to be started
      - Added explicit --kernel option, if not specified it
        defaults to the current running kernel (uname -r)
      - Added --exclude-file option
      - Exclude the following file patterns by default in the
        LiveCD image creation:
        - core.* (/core[.][0-9][0-9]*$)
        - *.rpmnew (.*[.]rpmnew$)
        - *.rpmsave (.*[.]rpmsave$)
        - /.* (^/[.].*)
        - .bash_history (/[.]bash_history$)
        - .fonts.cache-* (/[.]fonts[.]cache-[0-9]$)
        - .xauth* (/[.]xauth.*)
        - .xsession-errors (/[.]xsession-errors$)
      - Changed exclude directory pattern to not assume a full
        path, i.e. ^ is to be added to denote a full path
      - Do exact matches on the default excluded directories
        (leading ^ and trailing $) to shrink the size of the
        excluded list, making mkisofs scanning faster
      - Decreased initrd size by removing the extraoneous 250K
        (not needed anymore)
      - Cleaned usage information displayed in --help
      - If --cloop is not specified on command-line, don't create
        hard link
      - Try /tmp first before $TMPDIR for a decent tmp directory
        (/tmp is always excluded from the final LiveCD, $TMPDIR
        might not be)


* Mon, Sep 15, 2003, 0.5.2
  + Jaco Greeff <jaco@linuxminicd.org>:
    [linuxrc]:
      - Cater for pivot_root, allowing for better access to actual
        mounted filesystems


* Mon, Sep 01, 2003, 0.5.1
  + Jaco Greeff <jaco@linuxminicd.org>:
    [mklivecd]:
      - Initial release under the mklivecd name (preparing for a
        wider release to the MDK community) after being adapted
        from the MiniCD build, init and hwdetect scripts
    [mklivecd.spec]:
      - Added spec file for RPM build
