# $Id: mklivecd.spec.in,v 1.29 2004/01/25 17:45:31 jaco Exp $

%define name	mklivecd
%define version	@MKLIVECDVER@
%define release	@MKLIVECDREL@mdk

%define summary	Builds a LiveCD from an existing Mandrake Linux installation

Summary:	%{summary}
Name:		%{name}
Version:	%{version}
Release:	%{release}
License:	GPL
Group:		System/Configuration/Boot and Init
URL:		http://livecd.berlios.de/
Source0:	%{name}-@ARCHIVEVER@.tar.bz2
Requires:	busybox >= 1:1.00-0.pre4.2mdk, cloop-utils >= 1.02-4mdk, mkisofs, squashfs-tools >= 1.3r2-2mdk
BuildRoot:	%{_tmppath}/%{name}-root
Buildarch:	noarch

%description
The mklivecd tools are dedicated to providing you with the capability to
create your own LiveCD from a currently installed Mandrake Linux distribution.
It can be used to create your own travelling Mandrake-based LiveCD, specialised
LiveCD featuring custom-developed applications or to put together a demo disk
to show off the power of our favourite OS. The possibilities are endless!

Created CD's feature automatic hardware detection and setup. In addition, it
utilises compression technology allowing you to build a LiveCD from a partition
much larger than will typically fit on a CD. (Up to 2GB for a normal 650MB CD.)
When booting from this LiveCD, the data is transparently decompressed as needed
with almost no performance impact.

%prep
%setup -q -n %{name}-@ARCHIVEVER@

%build
%make

%install
rm -rf %buildroot
%makeinstall_std

%clean
rm -rf %buildroot

%files
%defattr(-,root,root)
%doc AUTHORS COPYING CHANGELOG FAQ README README.BOOTCODES README.USB TODO
%{_sbindir}/mklivecd
%{_sbindir}/hwdetect
%dir %{_datadir}/mklivecd
%{_datadir}/mklivecd/linuxrc
%{_datadir}/mklivecd/halt.local
%{_datadir}/mklivecd/rc.sysinit

%changelog
* @SPECDATE@ Jaco Greeff <jaco@mandrake.org> @MKLIVECDVER@-@MKLIVECDREL@mdk
- version @ARCHIVEVER@
- updated description
- added squashfs-tools require
- updated requires to include version numbers where earlier versions won't work

* Wed Dec 03 2003 Per Øyvind Karlsen <peroyvind@linux-mandrake.com> 0.5.6-2mdk
- spec fixes
- fix unowned dir

* Mon Oct  6 2003 Jaco Greeff <jaco@linuxminicd.org> 0.5.6-1mdk
- version 0.5.6
- spec fixes by Buchan Milne <bgmilne@cae.co.za>

* Sat Sep 27 2003 Tibor Pittich <Tibor.Pittich@phuture.sk> 0.5.5-2mdk
- rebuild

* Thu Sep 25 2003 Jaco Greeff <jaco@linuxminicd.org> 0.5.5-1mdk
- version 0.5.5

* Wed Sep 24 2003 Tibor Pittich <Tibor.Pittich@phuture.sk> 0.5.4-2mdk
- spec fixes

* Tue Sep 23 2003 Jaco Greeff <jaco@linuxminicd.org> 0.5.4-1mdk
- version 0.5.4
- removed patch0, fixed upstream

* Mon Sep 22 2003 Tibor Pittich <Tibor.Pittich@phuture.sk> 0.5.3-1mdk
- initial import into contrib, based on spec file from Jaco Greeff
- fixed requires (mkisofs)
- temporary locale fix to correct calculate initrd size
- correct mdk group name
- some macroszification
